-*- mode: compilation; default-directory: "~/git/folio/stripes/ui-plugin-eusage-reports/src/components/MatchingSummary/" -*-
Compilation started at Wed Jun 23 18:34:36

git diff 5efe917700cfb2ff1656253590fca36a563275cf
diff --git a/src/components/MatchingSummary/MatchEditor.js b/src/components/MatchingSummary/MatchEditor.js
index 09ecf5b..c2bcc33 100644
--- a/src/components/MatchingSummary/MatchEditor.js
+++ b/src/components/MatchingSummary/MatchEditor.js
@@ -1,19 +1,27 @@
 import PropTypes from 'prop-types';
-import { Paneset, Pane, Button } from '@folio/stripes/components';
+import { HasCommand, Paneset, Pane, Button } from '@folio/stripes/components';


-function MatchEditor({ matchType, onClose }) {
+function MatchEditor({ matchType, onClose, paneTitleRef }) {
   return (
+    <HasCommand
+      commands={[{
+	 name: 'close',
+	 handler: onClose,
+      }]}
+    >
     <Paneset isRoot>
       <Pane
	 defaultWidth="fill"
	 dismissible
	 onClose={onClose}
	 paneTitle={<>Match editor for <code>{matchType}</code></>}
+	 paneTitleRef={paneTitleRef}
       >
	 <Button onClick={onClose}>Dismiss</Button>
       </Pane>
     </Paneset>
+    </HasCommand>
   );
 }

@@ -21,6 +29,7 @@ function MatchEditor({ matchType, onClose }) {
 MatchEditor.propTypes = {
   matchType: PropTypes.string.isRequired,
   onClose: PropTypes.func.isRequired,
+  paneTitleRef: PropTypes.object.isRequired,
 };


diff --git a/src/components/MatchingSummary/MatchingSummaryView.js b/src/components/MatchingSummary/MatchingSummaryView.js
index 0fa4660..dc017c9 100644
--- a/src/components/MatchingSummary/MatchingSummaryView.js
+++ b/src/components/MatchingSummary/MatchingSummaryView.js
@@ -1,4 +1,4 @@
-import { useState } from 'react';
+import React, { useState } from 'react';
 import PropTypes from 'prop-types';
 import { FormattedMessage, FormattedDate } from 'react-intl';
 import { AccordionSet, Accordion, Row, Col, KeyValue, Layer } from '@folio/stripes/components';
@@ -19,6 +19,12 @@ function MatchingSummaryView({ data, resources }) {
   ];
   const nUnmatched = categories.filter(c => c.key === 'unmatched')[0].value;

+  const pluginPaneTitleRef = React.useRef();
+  const focusHandler = () => {
+    // eslint-disable-next-line no-unused-expressions
+    pluginPaneTitleRef.current?.focus();
+  };
+
   return (
     <>
       <Row>
@@ -72,8 +78,8 @@ function MatchingSummaryView({ data, resources }) {

       {
	 showMatches &&
-	 <Layer isOpen contentLabel="Match editor">
-	   <MatchEditor matchType={matchType} onClose={() => setShowMatches(false)} />
+	 <Layer isOpen contentLabel="Match editor" afterOpen={focusHandler}>
+	   <MatchEditor matchType={matchType} onClose={() => setShowMatches(false)} paneTitleRef={pluginPaneTitleRef} />
	 </Layer>
       }
     </>

Compilation finished at Wed Jun 23 18:34:36
